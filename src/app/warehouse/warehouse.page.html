<ion-header>
  <ion-toolbar>
    <ion-item lines="none" color="police-blue">
      <ion-icon class="arrow" name="arrow-back-outline" [routerLink]="['/home']" class="icon-toll-style"></ion-icon>
      <ion-label class="title">Magazzino</ion-label>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-refresher slot="fixed" pullFactor="0.5" pullMin="100" pullMax="200" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div *ngIf="contentLoaded && button==false">

    <ion-grid>
      <ion-col>
        <ion-row>
          <ion-label class="style-title">Stato</ion-label>
        </ion-row>
        <ion-row>
          <ion-label class="style-title-label">Bottiglie</ion-label>
        </ion-row>

        <ion-row>
          <ion-segment scrollable>
            <ion-label class="style-lab-warehouse" *ngFor="let bottle of warehouse.bottles.formats">
              {{bottle.quantity}}<sub class="style-sub">{{bottle.format}} </sub>
            </ion-label>
          </ion-segment>
          <!--  <swiper [pagination]="true" >
            <ng-template swiperSlide *ngFor="let bottle of warehouse.bottles.formats" >
              <ion-label class="style-lab-warehouse">{{bottle.quantity}}<sub class="style-sub">{{bottle.format}} </sub>
              </ion-label>
            </ng-template>
          </swiper> -->
          <!--  <ion-slides [options]="slideOpts">
            <ion-slide *ngFor="let bottle of warehouse.bottles.formats">
              <ion-label class="style-lab-warehouse">{{bottle.quantity}}<sub class="style-sub">{{bottle.format}} </sub>
              </ion-label>
            </ion-slide>
          </ion-slides> -->
        </ion-row>

        <ion-row>
          <ion-col class="style-col">
            <ion-label class="style-title-label-caps">Tappi</ion-label>
          </ion-col>
          <ion-col class="style-col">
            <ion-label class="style-number-caps">{{warehouse.caps_quantity}}</ion-label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col class="style-col">
            <ion-row class="style-title-label-tags">Etichette</ion-row>
          </ion-col>
          <ion-col class="style-col">
            <ion-label class="style-number-tags">{{warehouse.tags_quantity}}</ion-label>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-button class="style-button-refill" (click)="change()">Refill</ion-button>
        </ion-row>
      </ion-col>

    </ion-grid>
  </div>
  <div *ngIf="button==true && contentLoaded==true">
    <!-- <app-loading *ngIf="isLoading"></app-loading> -->
    <ion-grid>
      <ion-col>
        <ion-row>
          <ion-label class="style-title">Stato</ion-label>
        </ion-row>
        <ion-row>
          <ion-label class="style-title-label">Bottiglie</ion-label>
        </ion-row>

        <ion-row>
          <ion-segment scrollable>
            <ion-segment-button expand="block" (click)="bottlePicker()" class="style-picker" fill="clear"
              *ngFor="let bottle of warehouse.bottles.formats">
              <ion-input *ngIf="!bottleArechanged" class="style-lab-warehouse" [(ngModel)]="newBottlequantity" type="number">
                {{bottle.quantity}}<sub class="style-sub">{{bottle.format}}
                </sub>
              </ion-input>
              <ion-input *ngIf="bottleArechanged" class="style-lab-warehouse" [(ngModel)]="newBottlequantity" type="number">
                {{bottle.quantity + newBottlequantity}}<sub class="style-sub">{{bottle.format}}
                </sub>
              </ion-input>
            </ion-segment-button>
          </ion-segment>

        </ion-row>
        <ion-row>
          <ion-col class="style-col">
            <ion-label class="style-title-label-caps-picker">Tappi</ion-label>
          </ion-col>
          <ion-col class="style-col">
            <ion-button expand="block" (click)="capsPicker()" fill="clear" class="style-button-caps">
              <ion-input *ngIf="!capsArechanged" class="style-number-caps-picker" [(ngModel)]="newCapsQuantity" type="number">
                {{warehouse.caps_quantity}}
              </ion-input>
              <ion-input *ngIf="capsArechanged" class="style-number-caps-picker" [(ngModel)]="newCapsQuantity" type="number">
                {{warehouse.caps_quantity + newCapsQuantity}}
              </ion-input>
            </ion-button>
          </ion-col>

        </ion-row>
        <ion-row>
          <ion-col class="style-col">
            <ion-row class="style-title-label-tags-picker">Etichette</ion-row>
          </ion-col>
          <ion-col class="style-col">
            <ion-button expand="block" (click)="tagsPicker()" fill="clear"> 
              <ion-input *ngIf="!tagsArechanged" class="style-number-tags-picker" [(ngModel)]="newTagsQuantity" type="number">
                {{warehouse.tags_quantity}}
              </ion-input>
              <ion-input *ngIf="tagsArechanged" class="style-number-tags-picker" [(ngModel)]="newTagsQuantity" type="number">
                {{warehouse.tags_quantity + newTagsQuantity}}
              </ion-input>
            </ion-button>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-button class="style-button-save" (click)="saveChanges()">Salva</ion-button>
        </ion-row>
      </ion-col>

    </ion-grid>
  </div>
</ion-content>