<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-item color="police-blue" lines="none">
      <ion-icon slot="start" class="arrow" name="arrow-back-outline" [routerLink]="['/load']"></ion-icon>
      <ion-text class="title">Aggiungi Conferimento</ion-text>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content>
  <app-loading *ngIf="loading"></app-loading>

  <div *ngIf="!loading" class="insert-div">
    <ion-list>
      <ion-item *ngIf="!missing_idworker" class="it" lines="none">
        <ion-input class="input" name="_idworker" placeholder="Id" [(ngModel)]="postData._idworker">
        </ion-input>
      </ion-item>

      <ion-item *ngIf="missing_idworker" class="item-wrong" lines="none">
        <ion-input class="input" name="_idworker" placeholder="Id" [(ngModel)]="postData._idworker">
        </ion-input>
      </ion-item>

      <ion-item *ngIf="!missingSupplier"   class="it" lines="none">
        <ion-select placeholder="Fornitore" [(ngModel)]="chosenSupplier"  ok-text="Si" cancel-text="No">
          <ion-select-option  *ngFor="let supplier of suppliers" [value]="supplier" >
            {{supplier?.name}} {{supplier?.surname}}</ion-select-option>
        </ion-select>
      </ion-item>


      <ion-item *ngIf="missingSupplier" class="item-wrong"  lines="none">
        <ion-select placeholder="Fornitore" [(ngModel)]="chosenSupplier"  ok-text="Si" cancel-text="No">
      
            <ion-select-option  *ngFor="let supplier of suppliers" value="supplier">
              {{supplier?.name}} {{supplier?.surname}}</ion-select-option>


        </ion-select>
      </ion-item>
      <ion-item *ngIf="!missingOrigin" class="it" lines="none">
        <!-- <ion-select>Regione</ion-select> -->
        <ion-avatar *ngIf="regionSelected != '' ">
          <img src="{{flagToShow}}">
        </ion-avatar>
        <ion-select placeholder="Regione" [(ngModel)]="postData.origin" [(ngModel)]="regionSelected"
          (ngModelChange)="changeRegion()" ok-text="Si" cancel-text="No">
          <ion-select-option *ngFor="let region of regions,  let i  = index" value="{{region.name}}">{{region.name}}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="missingOrigin" class="item-wrong" lines="none">
        <!-- <ion-label >Regione</ion-label> -->
        <ion-avatar *ngIf="regionSelected != '' ">
          <img src="{{flagToShow}}">
        </ion-avatar>
        <ion-select placeholder="Regione" [(ngModel)]="postData.origin" [(ngModel)]="regionSelected"
          (ngModelChange)="changeRegion()" ok-text="Si" cancel-text="No">
          <ion-select-option *ngFor="let region of regions,  let i  = index" value="{{region.name}}">{{region.name}}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="!missingTypology" class="it" lines="none">
        <ion-select placeholder="Tipologia" class="input" [(ngModel)]="typologySelected"
          (ngModelChange)="changeTypology()" ok-text="Si" cancel-text="No">
          <ion-select-option *ngFor="let typology of typologies,  let i  = index" value="{{typology.name}}">
            {{typology.name}}</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="missingTypology" class="item-wrong" lines="none">
        <ion-select placeholder="Tipologia" class="input" [(ngModel)]="typologySelected"
          (ngModelChange)="changeTypology()" ok-text="Si" cancel-text="No">
          <ion-select-option *ngFor="let typology of typologies,  let i  = index" value="{{typology.name}}">
            {{typology.name}}</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item *ngIf="!missingQuantity" class="it" lines="none">
        <ion-input type="number" class="input" name="quantity" placeholder="Quantità (Kg)"
          [(ngModel)]="postData.quantity">
        </ion-input>
      </ion-item>

      <ion-item *ngIf="missingQuantity" class="item-wrong" lines="none">
        <ion-input type="number" class="input" name="quantity" placeholder="Quantità (Kg)"
          [(ngModel)]="postData.quantity">
        </ion-input>
      </ion-item>

      <ion-item *ngIf="!missingDescription" class="it" lines="none">
        <ion-input class="input" name="description" placeholder="Descrizione" [(ngModel)]="postData.description">
        </ion-input>
      </ion-item>

      <ion-item *ngIf="missingDescription" class="item-wrong" lines="none">
        <ion-input class="input" name="description" placeholder="Descrizione" [(ngModel)]="postData.description">
        </ion-input>
      </ion-item>

      <ion-button class="input" color="antique-fuchsia" class="btn-style" expand="block" shape="round" type="submit"
        (click)="checkEmpityFields()">
        Aggiungi carico
      </ion-button>
    </ion-list>
  </div>

</ion-content>